!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).grainjs=e()}}(function(){return function e(t,s,n){function i(r,u){if(!s[r]){if(!t[r]){var c="function"==typeof require&&require;if(!u&&c)return c(r,!0);if(o)return o(r,!0);var a=new Error("Cannot find module '"+r+"'");throw a.code="MODULE_NOT_FOUND",a}var l=s[r]={exports:{}};t[r][0].call(l.exports,function(e){var s=t[r][1][e];return i(s||e)},l,l.exports,e,t,s,n)}return s[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)i(n[r]);return i}({1:[function(e,t,s){"use strict";function n(e){for(var t in e)s.hasOwnProperty(t)||(s[t]=e[t])}Object.defineProperty(s,"__esModule",{value:!0}),n(e("./lib/computed")),n(e("./lib/dispose")),n(e("./lib/dom")),n(e("./lib/domevent")),n(e("./lib/emit")),n(e("./lib/kowrap")),n(e("./lib/observable")),n(e("./lib/subscribe")),n(e("./lib/util"))},{"./lib/computed":9,"./lib/dispose":10,"./lib/dom":11,"./lib/domevent":12,"./lib/emit":13,"./lib/kowrap":14,"./lib/observable":15,"./lib/subscribe":16,"./lib/util":17}],2:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e("fastpriorityqueue");class i{constructor(e,t){this._priority=0,this._enqueued=!1,this._callback=e,this._context=t}static isPrioritySmaller(e,t){return e._priority<t._priority}useDep(e){const t=e?e._priority:0;t>=this._priority&&(this._priority=t+1)}recompute(){this._priority=0,this._callback.call(this._context)}enqueue(){this._enqueued||(this._enqueued=!0,o.add(this))}}s.DepItem=i;const o=new n(i.isPrioritySmaller),r=[];let u=0;function c(){if(0===u&&o.size>0){u++;try{do{const e=o.poll();r.push(e),e.recompute()}while(o.size>0)}finally{for(const e of r)e._enqueued=!1;r.length=0,u--}}}s._getPriority=function(e){const t=e._getDepItem();return t?t._priority:0},s.compute=c,s.bundleChanges=function(e){try{return u++,e()}finally{u--,c()}}},{fastpriorityqueue:18}],3:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e("./_domDispose"),i=e("./_domImpl"),o=e("./dispose"),r=e("./browserGlobals");s.Component=class extends o.Disposable{render(...e){throw new Error("Not implemented")}create(e,...t){const s=this.render(...t);this._markerPre=r.G.document.createComment("A"),this._markerPost=r.G.document.createComment("B"),n.onDisposeElem(this._markerPost,()=>{this._markerPre=this._markerPost=void 0,this.dispose()}),this.autoDisposeWith(this._unmount,this),i.update(e,this._markerPre,s,this._markerPost)}_unmount(){if(this._markerPre&&this._markerPre.parentNode){let e;const t=this._markerPre.parentNode;for(let s=this._markerPre.nextSibling;s&&s!==this._markerPost;s=e)e=s.nextSibling,n.domDispose(s),t.removeChild(s);t.removeChild(this._markerPre),t.removeChild(this._markerPost)}}},s.createElem=function(e,t,...s){new t(e,...s)},s.create=function(e,...t){return s=>{new e(s,...t)}},s.createInit=function(e,...t){return s=>{t.pop()(new e(s,...t))}}},{"./_domDispose":4,"./_domImpl":5,"./browserGlobals":8,"./dispose":10}],4:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=new WeakMap;function i(e){let t=n.get(e);if(t){let s=e;do{n.delete(s),t(e),s=t,t=n.get(s)}while(t)}}function o(e,t){const s=n.get(e);n.set(e,t),s&&n.set(t,s)}function r(e,t){t&&o(e,()=>t.dispose())}s.domDispose=function(e){!function e(t,s){let n=t.firstChild;for(;n;)e(n,s),n=n.nextSibling;s(t)}(e,i)},s.onDisposeElem=o,s.onDispose=function(e){return t=>o(t,e)},s.autoDisposeElem=r,s.autoDispose=function(e){if(e)return t=>r(t,e)}},{}],5:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e("./_domDispose"),i=e("./_domMethods"),o=e("./browserGlobals");function r(e){return o.G.document.createElement(e)}function u(e){return o.G.document.createElementNS("http://www.w3.org/2000/svg",e)}function c(e,t){let s,n,i,o=t.indexOf(".");const r=t.indexOf("#");if(-1===o?o=t.length:i=t.substring(o+1).replace(/\./g," "),-1===r)s=t.substring(0,o);else{if(r>o)throw new Error(`ID must come before classes in dom("${t}")`);s=t.substring(0,r),n=t.substring(r+1,o)}const u=e(s);return n&&u.setAttribute("id",n),i&&u.setAttribute("class",i),u}function a(e,t){for(const s of t)d(e,s);return e}function l(e,t){try{return a(e,t)}catch(t){throw n.domDispose(e),t}}function d(e,t){if("function"==typeof t){const s=t(e);void 0!==s&&null!==s&&d(e,s)}else Array.isArray(t)?a(e,t):void 0===t||null===t||(t instanceof o.G.Node?e.appendChild(t):"object"==typeof t?i.attrsElem(e,t):e.appendChild(o.G.document.createTextNode(t)))}s.dom=function(e,...t){return l(c(r,e),t)},s.svg=function(e,...t){return l(c(u,e),t)},s.update=function(e,...t){return a(e,t)},s.frag=function(...e){return l(o.G.document.createDocumentFragment(),e)},s.find=function(e){return o.G.document.querySelector(e)},s.findAll=function(e){return o.G.document.querySelectorAll(e)}},{"./_domDispose":4,"./_domMethods":6,"./browserGlobals":8}],6:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e("./_domDispose"),i=e("./_domImpl"),o=e("./binding"),r=e("./browserGlobals"),u=new WeakMap;function c(e,t,s){n.autoDisposeElem(e,o.subscribe(t,s))}function a(e,t){for(const s of Object.keys(t))e.setAttribute(s,t[s])}function l(e,t,s){null===s||void 0===s?e.removeAttribute(t):e.setAttribute(t,s)}function d(e,t,s){l(e,t,s?"":null)}function p(e,t,s){e.style[t]=s}function h(e,t,s){e[t]=s}function f(e,t){e.style.display=t?"":"none"}function m(e,t){e.style.display=t?"none":""}function _(e,t,s){e.classList.toggle(t,Boolean(s))}function b(e,t,s){const i=u.get(e);i?i[t]=s:(n.onDisposeElem(e,()=>u.delete(e)),u.set(e,{[t]:s}))}function y(e,t){const s=t||g;return t=>{const o=r.G.document.createComment("a"),u=r.G.document.createComment("b");t.appendChild(o),t.appendChild(u),c(t,e,e=>(function(e,t,s,o){if(t.parentNode===e){let r;for(let i=t.nextSibling;i&&i!==s;i=r)r=i.nextSibling,n.domDispose(i),e.removeChild(i);e.insertBefore(i.frag(o),s)}})(t,o,u,s(e)))}}function g(e){return e}s.attrsElem=a,s.attrs=function(e){return t=>a(t,e)},s.attrElem=l,s.attr=function(e,t){return s=>c(s,t,t=>l(s,e,t))},s.boolAttrElem=d,s.boolAttr=function(e,t){return s=>c(s,t,t=>d(s,e,t))},s.textElem=function(e,t){e.appendChild(r.G.document.createTextNode(t))},s.text=function(e){return t=>{const s=r.G.document.createTextNode("");c(t,e,e=>{s.nodeValue=e}),t.appendChild(s)}},s.styleElem=p,s.style=function(e,t){return s=>c(s,t,t=>p(s,e,t))},s.propElem=h,s.prop=function(e,t){return s=>c(s,t,t=>h(s,e,t))},s.showElem=f,s.show=function(e){return t=>c(t,e,e=>f(t,e))},s.hideElem=m,s.hide=function(e){return t=>c(t,e,e=>m(t,e))},s.toggleClassElem=_,s.toggleClass=function(e,t){return s=>c(s,t,t=>_(s,e,t))},s.cssClassElem=function(e,t){t&&e.classList.add(t)},s.cssClass=function(e){return t=>{let s=null;c(t,e,e=>{s&&t.classList.remove(s),s=e,e&&t.classList.add(e)})}},s.dataElem=b,s.data=function(e,t){return s=>c(s,t,t=>b(s,e,t))},s.getData=function(e,t){const s=u.get(e);return s&&s[t]},s.domComputed=y,s.maybe=function(e,t){return y(e,e=>e?t(e):null)}},{"./_domDispose":4,"./_domImpl":5,"./binding":7,"./browserGlobals":8}],7:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e("./computed"),i=e("./observable");s.subscribe=function(e,t){if("function"==typeof e){const s=e;if("function"==typeof s.peek){let e=s.peek();const n=s.subscribe(s=>{const n=e;e=s,t(s,n)});return t(e,void 0),n}const i=n.computed(e);return i.addListener(t),t(i.get(),void 0),i}if(e instanceof i.Observable){const s=e.addListener(t);return t(e.get(),void 0),s}return t(e,void 0),null}},{"./computed":9,"./observable":15}],8:[function(e,t,s){"use strict";function n(e,t){e.DocumentFragment=t.DocumentFragment,e.Element=t.Element,e.Node=t.Node,e.document=t.document,e.window=t.window}Object.defineProperty(s,"__esModule",{value:!0});const i={};n(i,"undefined"!=typeof window?window:{}),s.G=Object.assign({},i);const o=[i];s.pushGlobals=function(e){o.push(e),n(s.G,e)},s.popGlobals=function(){o.length>1&&o.pop(),n(s.G,o[o.length-1])}},{}],9:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e("./observable"),i=e("./subscribe");function o(){throw new Error("Can't write to non-writable computed")}class r extends n.Observable{constructor(e,t){super(void 0),this._callback=e,this._write=o,this._sub=new i.Subscription(this._read.bind(this),t)}_getDepItem(){return this._sub._getDepItem()}set(e){this._write(e)}onWrite(e){return this._write=e,this}dispose(){this._sub.dispose(),super.dispose()}_read(e,...t){super.set(this._callback(e,...t))}}s.Computed=r,s.computed=function(...e){const t=e.pop();return new r(t,e)}},{"./observable":15,"./subscribe":16}],10:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});function n(e){e.call(this)}function i(e){Object.keys(e).forEach(t=>e[t]=null)}function o(e,t,s){try{t.call(e,s)}catch(t){console.error("While disposing %s, error disposing %s: %s",r(e),r(s),t)}}function r(e){return e&&e.constructor&&e.constructor.name?e.constructor.name:""+e}function u(e){e.dispose()}s.Disposable=class{constructor(...e){this._disposalList=[];try{this.create(...e)}catch(e){try{this.dispose()}catch(e){console.error("Error disposing partially constructed %s:",this.constructor.name,e)}throw e}}autoDispose(e){return this.autoDisposeWith(u,e)}autoDisposeWith(e,t){return this._disposalList.push({obj:t,disposer:e}),t}autoDisposeWithMethod(e,t){return this.autoDisposeWith(t=>t[e](),t)}autoDisposeCallback(e){this.autoDisposeWith(n,e)}wipeOnDispose(){this.autoDisposeWith(i,this)}disposeRelease(e){const t=this._disposalList,s=t.findIndex(t=>t.obj===e);return-1!==s&&t.splice(s,1),e}disposeDiscard(e){const t=this._disposalList,s=t.findIndex(t=>t.obj===e);if(-1!==s){const n=t[s];t.splice(s,1),n.disposer.call(this,e)}}isDisposed(){return null===this._disposalList}dispose(){const e=this._disposalList;if(e){this._disposalList=null;for(let t=e.length-1;t>=0;t--){const s=e[t];o(this,s.disposer,s.obj)}}}}},{}],11:[function(e,t,s){"use strict";function n(e){for(var t in e)s.hasOwnProperty(t)||(s[t]=e[t])}Object.defineProperty(s,"__esModule",{value:!0});var i=e("./_domImpl");s.svg=i.svg,s.update=i.update,s.frag=i.frag,s.find=i.find,s.findAll=i.findAll,n(e("./_domComponent")),n(e("./_domDispose")),n(e("./_domMethods")),n(e("./domevent"));const o=e("./_domComponent"),r=e("./_domDispose"),u=e("./_domImpl"),c=e("./_domMethods"),a=e("./domevent");function l(e,...t){return u.dom(e,...t)}s.dom=l,function(e){e.svg=u.svg,e.frag=u.frag,e.update=u.update,e.find=u.find,e.findAll=u.findAll,e.domDispose=r.domDispose,e.onDisposeElem=r.onDisposeElem,e.onDispose=r.onDispose,e.autoDisposeElem=r.autoDisposeElem,e.autoDispose=r.autoDispose,e.attrsElem=c.attrsElem,e.attrs=c.attrs,e.attrElem=c.attrElem,e.attr=c.attr,e.boolAttrElem=c.boolAttrElem,e.boolAttr=c.boolAttr,e.textElem=c.textElem,e.text=c.text,e.styleElem=c.styleElem,e.style=c.style,e.propElem=c.propElem,e.prop=c.prop,e.showElem=c.showElem,e.show=c.show,e.hideElem=c.hideElem,e.hide=c.hide,e.toggleClassElem=c.toggleClassElem,e.toggleClass=c.toggleClass,e.cssClassElem=c.cssClassElem,e.cssClass=c.cssClass,e.dataElem=c.dataElem,e.data=c.data,e.getData=c.getData,e.domComputed=c.domComputed,e.maybe=c.maybe,e.Component=o.Component,e.createElem=o.createElem,e.create=o.create,e.createInit=o.createInit,e.onElem=a.onElem,e.on=a.on,e.onMatchElem=a.onMatchElem,e.onMatch=a.onMatch}(l=s.dom||(s.dom={}))},{"./_domComponent":3,"./_domDispose":4,"./_domImpl":5,"./_domMethods":6,"./domevent":12}],12:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});class n{constructor(e,t,s,n,i){this.elem=e,this.eventType=t,this.callback=s,this.useCapture=n,this.selector=i,this.elem.addEventListener(this.eventType,this,this.useCapture)}handleEvent(e){(0,this.callback)(e,this.elem)}dispose(){this.elem.removeEventListener(this.eventType,this,this.useCapture)}}class i extends n{handleEvent(e){const t=function(e,t,s){for(let n=e;n&&n!==t;n=n.parentElement)if(n.matches(s))return n;return null}(e.target,this.elem,this.selector);if(t){(0,this.callback)(e,t)}}}s.onElem=function(e,t,s,{useCapture:i=!1}={}){return new n(e,t,s,i)},s.on=function(e,t,{useCapture:s=!1}={}){return i=>new n(i,e,t,s)},s.onMatchElem=function(e,t,s,n,{useCapture:o=!1}={}){return new i(e,s,n,o,t)},s.onMatch=function(e,t,s,{useCapture:n=!1}={}){return o=>new i(o,t,s,n,e)}},{}],13:[function(e,t,s){"use strict";function n(){}Object.defineProperty(s,"__esModule",{value:!0});class i{constructor(){this._next=null,this._prev=null,this._next=this,this._prev=this}isDisposed(){return!this._next}_insertBefore(e,t){const s=e._prev;s._next=t,e._prev=t,t._prev=s,t._next=e}_removeNode(e){e._prev&&(e._prev._next=e._next,e._next._prev=e._prev),e._prev=e._next=null}_disposeList(){let e=this,t=e._next;for(;null!==t;)e._next=e._prev=null,t=(e=t)._next}}s.LLink=i;s.Emitter=class extends i{constructor(){super(),this._changeCB=n,this._changeCBContext=void 0}addListener(e,t){return new o(this,e,t)}emit(...e){o.callAll(this._next,this,e)}setChangeCB(e,t){this._changeCB=e||n,this._changeCBContext=t}_triggerChangeCB(){this._changeCB.call(this._changeCBContext,this.hasListeners())}hasListeners(){return this._next!==this}dispose(){this._disposeList(),this._changeCB=n,this._changeCBContext=void 0}};class o extends i{constructor(e,t,s){super(),this.emitter=e,this.callback=t,this.context=s,this._insertBefore(e,this),e._triggerChangeCB()}static callAll(e,t,s){for(;e!==t;){const t=e;t.callback.call(t.context,...s),e=t._next}}dispose(){this.isDisposed()||(this._removeNode(this),this.emitter._triggerChangeCB())}}s.Listener=o},{}],14:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e("./observable"),i=new WeakMap,o=new WeakMap;s.fromKo=function(e){const t=i.get(e);if(t)return t;const s=n.observable(e.peek());return i.set(e,s),e.subscribe(e=>s.set(e)),s},s.toKo=function(e,t){const s=o.get(t);if(s)return s;const n=e.observable(t.get());return o.set(t,n),t.addListener(e=>n(e)),n}},{"./observable":15}],15:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e("./_computed_queue"),i=e("./emit");var o=e("./_computed_queue");s.bundleChanges=o.bundleChanges;class r{constructor(e){this._onChange=new i.Emitter,this._value=e}get(){return this._value}set(e){const t=this._value;e!==t&&(this._value=e,this._onChange.emit(e,t),n.compute())}addListener(e,t){return this._onChange.addListener(e,t)}hasListeners(){return this._onChange.hasListeners()}setListenerChangeCB(e,t){this._onChange.setChangeCB(e,t)}_getDepItem(){return null}dispose(){this._onChange.dispose(),this._value=void 0}isDisposed(){return this._onChange.isDisposed()}}s.Observable=r,s.observable=function(e){return new r(e)}},{"./_computed_queue":2,"./emit":13}],16:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const n=e("./_computed_queue"),i=[];class o{constructor(e,t){this._depItem=new n.DepItem(this._evaluate,this),this._dependencies=t.length>0?t:i,this._depListeners=t.length>0?t.map(e=>this._subscribeTo(e)):i,this._dynDeps=new Map,this._callback=e,this._useFunc=this._useDependency.bind(this),this._evaluate()}dispose(){for(const e of this._depListeners)e.dispose();for(const e of this._dynDeps.values())e.dispose()}_getDepItem(){return this._depItem}_useDependency(e){let t=this._dynDeps.get(e);return t||(t=this._subscribeTo(e),this._dynDeps.set(e,t)),t._inUse=!0,this._depItem.useDep(e._getDepItem()),e.get()}_evaluate(){try{const e=[this._useFunc];for(let t=0,s=this._dependencies.length;t<s;t++)e[t+1]=this._dependencies[t].get(),this._depItem.useDep(this._dependencies[t]._getDepItem());return this._callback.apply(void 0,e)}finally{this._dynDeps.forEach((e,t)=>{e._inUse?e._inUse=!1:(this._dynDeps.delete(t),e.dispose())})}}_subscribeTo(e){return e.addListener(this._enqueue,this)}_enqueue(){this._depItem.enqueue()}}s.Subscription=o,s.subscribe=function(...e){const t=e.pop();return new o(t,e)}},{"./_computed_queue":2}],17:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.bindB=function(e,t){switch(t.length){case 0:return()=>e();case 1:return()=>e(t[0]);case 2:return()=>e(t[0],t[1]);case 3:return()=>e(t[0],t[1],t[2]);case 4:return()=>e(t[0],t[1],t[2],t[3]);case 5:return()=>e(t[0],t[1],t[2],t[3],t[4]);case 6:return()=>e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return()=>e(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);case 8:return()=>e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]);default:return()=>e.apply(void 0,t)}},s.bindUB=function(e,t){switch(t.length){case 0:return t=>e(t);case 1:return s=>e(s,t[0]);case 2:return s=>e(s,t[0],t[1]);case 3:return s=>e(s,t[0],t[1],t[2]);case 4:return s=>e(s,t[0],t[1],t[2],t[3]);case 5:return s=>e(s,t[0],t[1],t[2],t[3],t[4]);case 6:return s=>e(s,t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return s=>e(s,t[0],t[1],t[2],t[3],t[4],t[5],t[6]);case 8:return s=>e(s,t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]);default:return s=>e(s,...t)}},s.bindBU=function(e,t){switch(t.length){case 0:return t=>e(t);case 1:return s=>e(t[0],s);case 2:return s=>e(t[0],t[1],s);case 3:return s=>e(t[0],t[1],t[2],s);case 4:return s=>e(t[0],t[1],t[2],t[3],s);case 5:return s=>e(t[0],t[1],t[2],t[3],t[4],s);case 6:return s=>e(t[0],t[1],t[2],t[3],t[4],t[5],s);case 7:return s=>e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],s);case 8:return s=>e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],s);default:return s=>e(...t,s)}}},{}],18:[function(e,t,s){"use strict";var n=function(e,t){return e<t};function i(e){if(!(this instanceof i))return new i(e);this.array=[],this.size=0,this.compare=e||n}i.prototype.add=function(e){var t,s,n=this.size;for(this.array[this.size]=e,this.size+=1;n>0&&(t=n-1>>1,s=this.array[t],this.compare(e,s));)this.array[n]=s,n=t;this.array[n]=e},i.prototype.heapify=function(e){var t;for(this.array=e,this.size=e.length,t=this.size>>1;t>=0;t--)this._percolateDown(t)},i.prototype._percolateUp=function(e){for(var t,s,n=this.array[e];e>0&&(t=e-1>>1,s=this.array[t],this.compare(n,s));)this.array[e]=s,e=t;this.array[e]=n},i.prototype._percolateDown=function(e){for(var t,s,n,i=this.size,o=this.size>>>1,r=this.array[e];e<o&&(s=(t=1+(e<<1))+1,n=this.array[t],s<i&&this.compare(this.array[s],n)&&(t=s,n=this.array[s]),this.compare(n,r));)this.array[e]=n,e=t;this.array[e]=r},i.prototype.peek=function(){if(0!=this.size)return this.array[0]},i.prototype.poll=function(){if(0!=this.size){var e=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,e}},i.prototype.replaceTop=function(e){if(0!=this.size){var t=this.array[0];return this.array[0]=e,this._percolateDown(0),t}},i.prototype.trim=function(){this.array=this.array.slice(0,this.size)},i.prototype.isEmpty=function(){return 0===this.size};e.main===t&&function(){var e=new i(function(e,t){return e<t});for(e.add(1),e.add(0),e.add(5),e.add(4),e.add(3);!e.isEmpty();)console.log(e.poll())}(),t.exports=i},{}]},{},[1])(1)});
//# sourceMappingURL=grain-full.min.js.map